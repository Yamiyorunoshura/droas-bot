# 2. 功能性需求 (Functional Requirements)


### F-001 子機器人管理
- 描述: 系統可創建、啟動、停止、重啟最多 10 個子機器人實例。
- 優先級: 高
- 使用者故事: 作為系統管理者，我希望能管理多個子機器人，讓它們各自服務不同的群組與場景。
- 驗收標準:
  - 可同時運行最多 10 個子機器人
  - 支援對單一子機器人的啟停與重啟操作
  - 子機器人故障時自動重啟並上報母機器人
- 依賴: F-003

### F-002 群組防護（母機器人）
- 描述: 提供群組防護，包含垃圾訊息與自動刪除、重複訊息檢測、連結安全檢測、洗版行為檢測；自動禁言，禁言時間可由管理員調整。
- 優先級: 高
- 使用者故事: 作為群組管理員，我希望自動偵測與處理惡意或擾亂行為，維持群組品質。
- 驗收標準:
  - 可設定防護嚴格程度（如: 寬鬆/中等/嚴格）
  - 可針對垃圾訊息、重複訊息、連結安全進行檢測與自動處理
  - 可偵測洗版行為並自動禁言
  - 禁言時間可由管理員以指令或設定調整

### F-003 配置管理（YAML + 熱重載）
- 描述: 每個子機器人使用獨立 YAML 檔配置（包含 LLM base_url、api_key、discord bot token、系統提示詞），支援熱重載。
- 優先級: 高
- 使用者故事: 作為系統管理者，我希望能以 YAML 管理各子機器人的設定並在不重啟的情況下生效。
- 驗收標準:
  - 每個子機器人有獨立 YAML 檔
  - 修改後可在 10 秒內熱重載生效
  - 配置變更具備基本語法驗證與錯誤回報

### F-004 工具調用系統（母子交互）
- 描述: 子機器人可透過受控的工具調用介面，與母機器人的系統（例如：經濟系統）進行交互。
- 優先級: 中
- 使用者故事: 作為開發者，我希望子機器人能調用母機器人的服務，實現擴展功能。
- 驗收標準:
  - 提供標準化的工具調用介面（API/事件）
  - 工具調用端對端響應時間 ≤ 2 秒（正常負載）
  - 權限可控，並可審核調用紀錄

### F-005 監控與告警
- 描述: 提供系統與子機器人的運行監控、日誌記錄與告警機制。
- 優先級: 中
- 驗收標準:
  - 支援設定日誌等級（DEBUG/INFO/WARN/ERROR）
  - 暴露基本監控指標（訊息處理量、錯誤率、API 調用次數）
  - 告警條件可設定（例如：API 配額耗盡、連續錯誤）

