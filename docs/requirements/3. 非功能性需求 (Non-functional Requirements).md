# 3. 非功能性需求 (Non-functional Requirements)


### NFR-P-001 訊息處理性能
- 描述: 每個群組的訊息頻率為每分鐘數條，需在 5 秒內完成垃圾檢測與處理。
- 指標與測試: 在 2 核 CPU、4GB RAM 的雲主機上，模擬正常負載時 95 百分位處理時間 ≤ 5 秒。

### NFR-P-002 工具調用性能
- 描述: 子機器人與母機器人的工具調用需在 2 秒內完成回應（正常負載）。
- 指標與測試: 在 2 核 CPU、4GB RAM 環境下，端對端延遲 p95 ≤ 2 秒。

### NFR-R-001 可用性與恢復
- 描述: 系統應 24/7 運作，年度可用性 99%，子機器人故障自動重啟，並由母機器人通知錯誤事件。
- 測試方法: 混沌測試注入子機器人崩潰，驗證自動重啟與告警。

### NFR-S-001 安全性
- 描述: OpenAI API keys 與 Discord tokens 必須安全存放（加密或環境變數）。
- 機制: 支援以環境變數注入秘密；磁碟上存放時需加密；敏感資訊不得寫入普通日誌。

### NFR-O-001 可觀測性
- 描述: 系統需具備可觀測性，包括結構化日誌、指標與告警。
- 指標: 訊息處理量、錯誤率、API 調用次數、延遲分佈。
- 告警: 當 API 配額即將耗盡、錯誤率飆升、無法連線 Discord/LLM 時觸發。

### NFR-D-001 部署環境
- 描述: 部署於雲服務器（2 核 CPU、4GB RAM），暫不需多環境（dev/staging/prod）。

